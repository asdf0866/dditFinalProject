<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.IInterestMapper">

	<select id="checkLikeRecruit" parameterType="intRecruitVO" resultType="int">
		SELECT COUNT(*)
		  FROM INTEREST_RECRUIT
		 WHERE 1 = 1
		   AND MEM_ID = #{memId}
		   AND RECRUIT_NO = #{recruitNo}
	</select>
	
	<insert id="likeRecruit" parameterType="intRecruitVO">
		INSERT INTO INTEREST_RECRUIT(
			MEM_ID, RECRUIT_NO, INTEREST_REG_YMD
		)
		VALUES(
			#{memId}, #{recruitNo}, TO_CHAR(SYSDATE, 'yyyyMMdd')
		)
	</insert>
	
	<delete id="likeRecruitDelete" parameterType="intRecruitVO">
		DELETE FROM INTEREST_RECRUIT
		 WHERE MEM_ID = #{memId}
		   AND RECRUIT_NO = #{recruitNo}
	</delete>
	
	<select id="getLikeRecruit" parameterType="String" resultType="intRecruitVO">
		SELECT MEM_ID, RECRUIT_NO, INTEREST_REG_YMD
		  FROM INTEREST_RECRUIT
		 WHERE MEM_ID = #{memId}
	</select>
	
	<select id="getLikeCompanyList" parameterType="String" resultType="intCompanyVO">
		SELECT MEM_ID, CO_NO, INTEREST_REG_YMD, INTEREST_DEL_YN
		  FROM INTEREST_COMPANY
		 WHERE 1 = 1
		   AND MEM_ID = #{memId}
		   AND INTEREST_DEL_YN != 'Y'
	</select>
	
	<insert id="likeCompany" parameterType="intCompanyVO">
		INSERT INTO INTEREST_COMPANY(
			MEM_ID, CO_NO, INTEREST_REG_YMD, INTEREST_DEL_YN
		)
		VALUES(
			#{memId}, #{coNo}, TO_CHAR(SYSDATE, 'yyyyMMdd'), 'N'
		)
	</insert>
	
	<delete id="likeCompanyDelete" parameterType="intCompanyVO">
		DELETE FROM INTEREST_COMPANY
		 WHERE MEM_ID = #{memId}
		   AND CO_NO = #{coNo}
	</delete>

</mapper>